<!doctype html>
<html lang="en">
<head>
	<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no">
	<meta charset="UTF-8">
	<title>HCprojectpage</title>
	<meta charset="utf-8">
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Haringey map</title>

	<link rel="shortcut icon" href="images/hcc.png" type="image/png">
	<link rel="stylesheet" href="css/slick.css">
	<link rel="stylesheet" href="css/lineicons.css">
	<link rel="stylesheet" href="css/font-awesome.min.css">
	<link rel="stylesheet" href="css/animate.css">
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/default.css">
	<link rel="stylesheet" href="css/style.css">
	<link href="css/mycss.css" rel="stylesheet" />
	<link href='css/shading.css' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

	<script src="js/d3-tip.js"></script>
	<script src="js/d3.v4.js"></script>
	<script src="js/d3.fisheye.js"></script>
	<script src="js/uk.js"></script>
	<script src="js/d3-tip.js"></script>
	<script type="text/javascript" src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/echarts.js"></script>
	<script src="js/echarts.js"></script>
	<script type="text/javascript">
			if (!Modernizr.hashchange || !Modernizr.svg || typeof document.getElementsByClassName === "undefined") {
				document.location.href="fail.html";
			}
	</script>
	<script>
			iframeMessenger.enableAutoResize();
			iframeMessenger.getLocation(function(parent_url_obj) {
				var hash = parent_url_obj.hash;
				if (hash != "") window.location.hash = hash;
			});
	</script>
	<script type="text/javascript">
		  var _gaq = _gaq || [];
		  _gaq.push(['_setAccount', 'UA-30249221-1']);
		  _gaq.push(['_trackPageview']);
		  (function() {
		    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		  })();
	</script>
	<script type="text/javascript">
			var carbonmap_data_unit = {
				// Maps index
				"Area": "{{unit_sqkm}}",
				"Population": "{{unit_people}}",
				"GDP": "$",
				"Extraction": "{{unit_mT}}",
				"Emissions": "{{unit_mT}}",
				"PetersEmissions": "{{unit_mT}}",
				"Consumption": "{{unit_mT}}",
				"Historical": "{{unit_mT}}",
				"Reserves": "{{unit_mT}}",
				"PeopleAtRisk": "{{unit_people}}",
				"SeaLevel": "{{unit_people}}",
				"Poverty": "{{unit_people}}",
				// Shading index
				"EmissionsChange": "%",
				"CO2perCapita": "{{unit_T}}",
				"GDPperCapita": "$",
				"PopulationGrowth": "%"
			};
	</script>
	<script src="js/slick.min.js"></script>
	<script src="js/jquery.easing.min.js"></script>
	<script src="js/scrolling-nav.js"></script>
	<script src="js/main.js"></script>

	<script>

//citation map effect implementation reference d3 Art Museum (https://d3-graph-gallery.com/cartogram.html)
//and internet link (https://blog.csdn.net/qq_45627719/article/details/106592761?spm=1001.2014.3001.5501)
//define initial map variables
	var mapSvg;
	var HaringeyMapJson;
	var hcproj;
	var width = 1000;
	var height = 600;
	var HcWebData;
	var mapTip;
	var mapXYS = [{ox:364,oy:255,size:153},{ox:379,oy:219,size:122},{ox:643,oy:240,size:104},{ox:378,oy:387,size:137},{ox:251,oy:293,size:163},{ox:500,oy:399,size:172},{ox:576,oy:397,size:97},{ox:246,oy:399,size:200},{ox:416,oy:345,size:146},{ox:303,oy:336,size:101},{ox:761,oy:240,size:141},{ox:634,oy:382,size:73},{ox:717,oy:366,size:105},{ox:582,oy:360,size:113},{ox:460,oy:428,size:118},{ox:637,oy:316,size:92},{ox:727,oy:301,size:96},{ox:569,oy:301,size:130},{ox:580,oy:224,size:129},{ox:481,oy:232,size:116},{ox:483,oy:290,size:133}];

// Gradient colour attribute values
	var colors = ["#9c88ff", "#487eb0", "#5352ed", "#c23616","#5470c6","#91cd77","#f9c956"];
	function init(){
		mapTip = d3.tip()
			.attr("class","maptip")
			.offset([-5, 0])
			.html(function(d){return setTipHtml(d);});

// raw Data processing
		d3.csv("hcdata.csv", function(data) {
			HcWebData = data;
			HcWebData.forEach(d => {
				d["Education"] = Number(d["Education"].replace("%",""));
				d["Health"] = Number(d["Health"].replace("%",""));
				d["Religion"] = Number(d["Religion"].replace("%",""));
				d["Language"] = Number(d["Language"].replace("%",""));
				d["Green-avail"] = d["Green-avail"].replace("%","");
				d["Employment"] = Number(d["Employment"].replace("%",""));
				d["emission"] = Number(d["emission"].replace("%",""));
				d["Average IMD index"] = Number(d["Average IMD index"].replace("missing","0"));
				d["whather water good"] = Number(d["whather water good"].replace("Y","1").replace("N","0"));
			});
			drawMap();
		});

// canvas settings
		mapSvg = d3.select('#mapContent')
			.append('svg')
			.attr('width', width)
			.attr('height', height);

		mapSvg.call(mapTip);

//region json data projection
		hcproj = d3.geoNaturalEarth1()
		.scale(400000)
		.translate([1050, 362700])

		HaringeyMapJson = ukJson.features;

// initialisation of the fisheye effect
		var fisheye = d3.fisheye.circular().distortion(3);
		d3.select(".topmenuitem div img")
		.on("click",function(){
			d3.selectAll(".topmenuitem div span").attr("class","").style("color","#555");
			d3.select(this).style("color","#fff");
			for(var i=0;i<mapPathData.length;i++){
			  var cd = "M"+mapPathData[i].d[0][0]+","+mapPathData[i].d[0][1];
			  for(var j=1;j<mapPathData[i].d.length;j++){
				cd += "L"+mapPathData[i].d[j][0]+","+mapPathData[i].d[j][1];
			  }
			  d3.select("#"+mapPathData[i].id)
			  .transition()
			  .duration(1000)
			  .attr("d",cd+"Z");
			}
		});

		d3.selectAll(".topmenuitem div span")
		.on("click",function(){
			  d3.selectAll(".topmenuitem div span").attr("class","").style("color","#555");
			  d3.select(this).style("color","#fff");
			  d3.select(this).attr("class","topmenuitemsel");

			  var key = topMenuKey = d3.select(this).text();
			  for(var i=0;i<mapPathData.length;i++){
				for(var j=0;j<HcWebData.length;j++){
					if(mapPathData[i].name==HcWebData[j]["area label"]){
						mapPathData[i].vk = HcWebData[j][key];
						break;
					}
				}
			  }

<!--intro content-->
<!--				var introHTML2 = "";-->
<!--				if(d3.select(this).attr("id")=="topTrans")-->
<!--				{-->
<!--					introHTML2="Because the ward has changed in 2022, so the transport index of Hermitage&Gardens is null, and the data in South Tottenham/Tottenham Central actually is Tottenham Green's data "-->
<!--				}-->
<!--				else if(d3.select(this).attr("id")=="topgreen")-->
<!--				{-->
<!--					introHTML2="Because the ward has changed in 2022, so the Green space coverage area of Hermitage&Gardens is null, and the data in South Tottenham/Tottenham Central actually is Tottenham Green's data "-->
<!--				}-->
<!--				document.getElementById("intro-explain").innerHTML = introHTML2;-->

//intro content, intro page for regional overview
				var introHTML = "";
				if(d3.select(this).attr("id")=="toparea")
				{
					introHTML="The map represents the weighting of the 21 wards in the area of the Haringey(km2)"
				}
				else if(d3.select(this).attr("id")=="toppop")
				{
					introHTML="The map represents population's weight of 21 wards in Haringey(By ONS census)"
				}
				else if(d3.select(this).attr("id")=="topden")
				{
					introHTML="The map represents population density per square's weight of 21 wards in Haringey"
				}
				else if(d3.select(this).attr("id")=="topedu")
				{
					introHTML="The map shows the number of people who has been educiated in 21 wards in Haringey (who has Level 1 and entry level qualifications)"
				}
				else if(d3.select(this).attr("id")=="topheal")
				{
					introHTML="The maps shows the percentage weight of the population in 21 wards that is very healthy(calculated by ONS)"
				}
				else if(d3.select(this).attr("id")=="topreg")
				{
					introHTML="The maps shows the percentage weight of the population who has a religion(calculated by census)"
				}
				else if(d3.select(this).attr("id")=="topage")
				{
					introHTML="The maps shows the percentage weight of the population average in 21 wards"
				}
				else if(d3.select(this).attr("id")=="toplang")
				{
					introHTML="The maps shows the people's number who do not use the English"
				}
				else if(d3.select(this).attr("id")=="tophouse")
				{
					introHTML="The map shows the House ownership in 21 wards"
				}
				else if(d3.select(this).attr("id")=="topTrans")
				{
					introHTML="The map shows the percentage of people who need have more than 2 km work distance in each wards"
				}
				else if(d3.select(this).attr("id")=="topgreen")
				{
					introHTML="The map shows the green space availability in 21 wards,calculated by the percentage of house(which is easier for people to get in touch with green space) in each wards"
				}
				else if(d3.select(this).attr("id")=="topcrime")
				{
					introHTML="The map shows the crime density(km2) in 2022 in 21 wards"
				}
				else if(d3.select(this).attr("id")=="topinc")
				{
					introHTML="The map shows the average income score in 21 wards"
				}
				else if(d3.select(this).attr("id")=="topempo")
				{
					introHTML="The map shows the number people who is employed in 21 wards"
				}
				document.getElementById("introduction").innerHTML = introHTML;

			  mapPathData.sort(function(a,b){
				return a.vk-b.vk;
			  });

			  var reMapPathData = [];
			  for(var i=0;i<mapPathData.length;i++){
				  reMapPathData[i] = [];
				  for(var j=0;j<mapPathData[i].d.length;j++){
					  reMapPathData[i][j] = [];
					  for(var m=0;m<mapPathData[i].d[j].length;m++){
						reMapPathData[i][j][m] = mapPathData[i].d[j][m];
					  }
				  }
			  }

			// trash data clean(missing fill with 0)
			  var maxV = d3.max(HcWebData,function(d){
				  if(d[key]=="missing"){
					  return 0;
				  }
				  return Number(d[key])
			  });

			  console.log(mapPathData)

			  var obj;
			  var feObj;
			  for(var m=0;m<mapPathData.length;m++){
				var keyV = "n";
				for(var j=0;j<HcWebData.length;j++){
					if(mapPathData[m].name==HcWebData[j]["area label"] && HcWebData[j][key]!="missing"){
						keyV = HcWebData[j][key]/maxV;
						break;
					}
				}
				if(keyV!="n"){
					fisheye.focus([mapPathData[m].ox,mapPathData[m].oy])
					.radius(Number(HcWebData[j].Area)*110*keyV*keyV)

					for(var i=0;i<mapPathData.length;i++){
						for(var j=0;j<reMapPathData[i].length;j++){
							obj = {x:reMapPathData[i][j][0],y:reMapPathData[i][j][1]};
							feObj = fisheye(obj);
							reMapPathData[i][j][0] = feObj.x;
							reMapPathData[i][j][1] = feObj.y;
						}
					}
				}
			  }


			  for(var i=0;i<mapPathData.length;i++){
				  var cd = "M"+reMapPathData[i][0][0]+","+reMapPathData[i][0][1];
				  for(var j=1;j<reMapPathData[i].length;j++){
					cd += "L"+reMapPathData[i][j][0]+","+reMapPathData[i][j][1];
				  }

				  d3.select("#"+mapPathData[i].id)
				  .transition()
				  .duration(1000)
				  .attr("d",cd+"Z")
			  }
		})
		// Mouse hover tab effect
		.on("mouseover",function(){
			if(!d3.select(this).attr("class")){
				d3.select(this).style("color","#8246AF");
			}
		})
		.on("mouseout",function(){
			if(!d3.select(this).attr("class")){
				d3.select(this).style("color","#555");
			}
		})
	}

	// Mouse hover to display regional data
	function setTipHtml(d){
		var keyValue;
		for(var j=0;j<HcWebData.length;j++){
			if(d.properties.name==HcWebData[j]["area label"]){
				keyValue = HcWebData[j][topMenuKey];
				break;
			}
		}
		html = "<div>"+d.properties.name+"</div>"+
				"<div><span>"+topMenuKey+":"+keyValue+"</span></div>"
		return html;
	}

	//Binding data and mapping
	var mapPathData = [];
	function drawMap(){
		mapSvg.selectAll("g").remove();
		mapSvg = mapSvg.append("g")
			.selectAll("path")
			.data(HaringeyMapJson)
			.enter()
			.append("path")
			.attr("id",function(d){return "_"+d.properties.id})
			.attr("d",d3.geoPath().projection(hcproj))
			.attr("fill", function(d){
				var array = d3.select(this).attr("d").substring(1).split("L");
				var array1 = [];
				for(var m=0;m<array.length;m++){
					array1.push(array[m].split(","))
					if(m==array.length-1){
						array1[array1.length-1][1] = array1[array1.length-1][1].substring(0,array1[array1.length-1][1].length-1)
					}
				}
				mapPathData.push({id:"_"+d.properties.id,
				name:d.properties.name,
				d:array1
				});
				return "#ccc";
			})
			.on("mouseover",function(d){
				if(topMenuKey){
					mapTip.show(d);
				}
			})
			.on("mouseout",function(d){
				mapTip.hide(d);
			})
			.on("click",function(d){
				console.log(d,d.properties.name)
			})
			.style("stroke", "#fff")

		console.log(mapPathData)
		for(var i=0;i<mapPathData.length;i++){
			mapPathData[i].ox = mapXYS[i].ox;
			mapPathData[i].oy = mapXYS[i].oy;
			mapPathData[i].size = mapXYS[i].size;
		}
		shadeChange();
	}

	var topMenuKey;

	function shadeChange(){
		var key = document.getElementById("shadeSelect").value;

		HcWebData.sort(function(a,b){
			return a[key]-b[key];
		});

		//shade area intro
		var shadeHTML = "";
				if(key=="category")
				{
					shadeHTML="The Haringey can be divided into 3 regions(west/center/east) based on the railway line, the shade color of the map shows the region of the wards in Haringey"
				}
				else if(key=="emission")
				{
					shadeHTML="The shaded colours on the map show the percentage of households in each wards that do not have a car at home"
				}
				else if(key=="Average IMD index")
				{
					shadeHTML="The shade color of the map shows the IMD index(whole uk) of the wards"
				}
				else if(key=="Population change")
				{
					shadeHTML="The shade color of the map shows the population changes(%) of the ward"
				}
				else if(key=="whather water good")
				{
					shadeHTML="The shade color of the map shows the water qualuty whether is good in the wards"
				}
				document.getElementById("shade-explain").innerHTML = shadeHTML;

		//Sidebar selection of shade colour
		var listHTML = "";
		for(var i=0;i<HcWebData.length;i++){
			var cv;
			if(key=="category"){
					if(HcWebData[i][key]==1){
						cv = colors[4];
					}
					else if(HcWebData[i][key]==2){
						cv = colors[5];
					}
					else{
						cv = colors[6];
					}
				}
			else{
				if(i<5){
					cv = colors[0];
				}else if(i<10){
					cv = colors[1];
				}else if(i<15){
					cv = colors[2];
				}else{
					cv = colors[3];
				}
			}
			for(var j=0;j<mapPathData.length;j++){
				if(mapPathData[j].name==HcWebData[i]["area label"]){
					d3.select("#"+mapPathData[j].id)
					  .transition()
					  .duration(1000)
					  .attr("fill",cv);
					break;
				}
			}
		}

		// Initialise the fill colour partition
		if(key=="category"){
				listHTML = "<p>"+
							"<span style='background:"+colors[4]+";'></span>"+
							"<span>West Borough</span>"+
						"</p>";
				listHTML += "<p>"+
								"<span style='background:"+colors[5]+";'></span>"+
								"<span>Central Borough</span>"+
							"</p>";
				listHTML += "<p>"+
								"<span style='background:"+colors[6]+";'></span>"+
								"<span>East Borough</span>"+
							"</p>";
			}
		else{
		listHTML = "<p>"+
						"<span style='background:"+colors[0]+";'></span>"+
						"<span><"+HcWebData[5][key]+"</span>"+
					"</p>";
		listHTML += "<p>"+
						"<span style='background:"+colors[1]+";'></span>"+
						"<span>>="+HcWebData[5][key]+"<"+HcWebData[10][key]+"</span>"+
					"</p>";
		listHTML += "<p>"+
						"<span style='background:"+colors[2]+";'></span>"+
						"<span>>="+HcWebData[10][key]+"<"+HcWebData[15][key]+"</span>"+
					"</p>";
		listHTML += "<p>"+
						"<span style='background:"+colors[3]+";'></span>"+
						"<span>>="+HcWebData[15][key]+"</span>"+
					"</p>";
		}
		document.getElementById("shadeList").innerHTML = listHTML;
	}
  </script>

	//Rotating image
	<script>
      var cur_ul = document.getElementById("banner");
      var arr = new Array();
      for (i = 1; i <= 3; i++) {
        var cur_li = document.createElement("li");
        var cur_img = document.createElement("img");
        cur_img.src = "img/" + i + ".jpg";
        cur_img.style.width = "400px";
        cur_img.style.height = "200px";
        cur_li.appendChild(cur_img);
        cur_ul.appendChild(cur_li);
        cur_ul.onmouseenter = function () {
          clearInterval(timer);
        };
        cur_ul.onmouseleave = function () {
          timer = setInterval(get_next, 3000);
        };
        arr.push(cur_li);
      }
      var len = arr.length - 1;
      arr[len - 2].style.left = "0px";
      arr[len - 1].style.left = "200px";
      arr[len].style.left = "400px";
      arr[len - 1].style.transform = "scale(1.3)";
      arr[len - 1].style.zIndex = 100;
      function get_next() {
        var give_up = arr[arr.length - 1];
        arr.pop();
        arr.unshift(give_up);
        for (var i = 0; i < arr.length; i++) {
          arr[i].style.zIndex = i;
          arr[i].style.transform = "scale(1)";
        }
        arr[len - 2].style.left = "0px";
        arr[len - 1].style.left = "200px";
        arr[len].style.left = "400px";
        arr[len - 1].style.transform = "scale(1.3)";
        arr[len - 1].style.zIndex = 100;
      }
      var timer = setInterval(get_next, 3000);
      var pre_img = document.createElement("img");
      pre_img.src = "img/pre-icon.png";
      pre_img.style.position = "absolute";
      pre_img.style.width = "20px";
      pre_img.style.top = 0;
      pre_img.style.bottom = 0;
      pre_img.style.left = 0;
      pre_img.style.margin = "auto";
      pre_img.style.zIndex = 100;
      cur_ul.appendChild(pre_img);
      var next_img = document.createElement("img");
      next_img.src = "img/next-icon.png";
      next_img.style.position = "absolute";
      next_img.style.width = "20px";
      next_img.style.top = 0;
      next_img.style.bottom = 0;
      next_img.style.right = 0;
      next_img.style.margin = "auto";
      next_img.style.zIndex = 100;
      cur_ul.appendChild(next_img);
      pre_img.onclick = function () {
        get_pre();
      };
      next_img.onclick = function () {
        get_next();
      };
      function get_pre() {
        var give_up = arr[0];
        arr.shift();
        arr.push(give_up);
        for (var i = 0; i < arr.length; i++) {
          arr[i].style.zIndex = i;
          arr[i].style.transform = "scale(1)";
        }
        arr[len - 2].style.left = "0px";
        arr[len - 1].style.left = "200px";
        arr[len].style.left = "400px";
        arr[len - 1].style.transform = "scale(1.3)";
        arr[len - 1].style.zIndex = 100;
      }
    </script>
</head>
<body onload="init()">
<! --citation: this part of the content is partly from the template, the link is lost no longer quoted -->
<div class="preloader">
	<div class="loader">
		<div class="ytp-spinner">
			<div class="ytp-spinner-container">
				<div class="ytp-spinner-rotator">
					<div class="ytp-spinner-left">
						<div class="ytp-spinner-circle"></div>
					</div>
					<div class="ytp-spinner-right">
						<div class="ytp-spinner-circle"></div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>


<!-------head area-------->
<header class="header_area">
	<div class="header_navbar">
		<div class="container-fluid">
			<div class="row">
				<div class="col-lg-12">
					<nav class="navbar navbar-expand-lg">
						<a class="navbar-brand" href="index.html">
							<img src="images/hcc3.png" alt="Logo">
						</a>
						<div class="collapse navbar-collapse sub-menu-bar" id="navbarSupportedContent">
							<ul id="nav" class="navbar-nav ml-auto">
								<li class="nav-item active">
									<a class="page-scroll" href="#home">Intro</a>
								</li>
								<li class="nav-item">
									<a class="page-scroll" href="#growth">Show</a>
								</li>
								<li class="nav-item">
									<a class="page-scroll" href="#hcmap">HCC info Map</a>
								</li>
							</ul>
						</div>
					</nav>
				</div>
			</div>
		</div>
	</div>

	<div id="home" class="header_slider">
		<div class="container-fluid">
			<div class="slider-active">
				<div class="single_slider bg_cover d-flex align-items-center" style="background-image: url(images/hccslideex.jpg)">
					<div class="container">
						<div class="row">
							<div class="col-lg-7">
								<div class="slider_content">
									<h2 class="slider_title" data-animation="fadeInUp" data-delay="0.2s">Haringey council service</h2>
									<p data-animation="fadeInUp" data-delay="0.6s">Haringey council is one of the best community service systems in the Greater London.</p>
									<a class="main-btn" href="https://www.haringey.gov.uk/" data-animation="fadeInUp" data-delay="1s">Learn More</a>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="single_slider bg_cover d-flex align-items-center" style="background-image: url(images/hccslideex2.jpg)">
					<div class="container">
						<div class="row">
							<div class="col-lg-7">
								<div class="slider_content">
									<h2 class="slider_title" data-animation="fadeInUp" data-delay="0.2s">Haringey city</h2>
									<p data-animation="fadeInUp" data-delay="0.6s"> Haringey city is one of the best community the Greater London.</p>
									<a class="main-btn" href="https://www.haringey.gov.uk/" data-animation="fadeInUp" data-delay="1s">Learn More</a>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="single_slider bg_cover d-flex align-items-center" style="background-image: url(images/hccslideex3.jpg)">
					<div class="container">
						<div class="row">
							<div class="col-lg-7">
								<div class="slider_content">
									<h2 class="slider_title" data-animation="fadeInUp" data-delay="0.2s">Haringey annal report</h2>
									<p data-animation="fadeInUp" data-delay="0.6s">Click here and you will see a different Haringey.</p>
									<a class="main-btn" href="https://www.haringey.gov.uk/" data-animation="fadeInUp" data-delay="1s">Learn More</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div> <!-- slider Active -->
		</div> <!-- container fluid -->
	</div> <!-- header slider -->
</header>

<!-------chart area-------->
<script>(function(d, s, id) {
		  var js, fjs = d.getElementsByTagName(s)[0];
		  if (d.getElementById(id)) return;
		  js = d.createElement(s); js.id = id;
		  js.src = "//connect.facebook.net/en_GB/sdk.js#xfbml=1&appId=703862873033616&version=v2.0";
		  fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));
  </script>
<div style="margin-top:90px;">
	<section id=growth class="growth_area pt-50 blue-bg " style="height:820px;">
		<div class="section_title text-center pb-15">
			<h4 class=sub_title>Shinning part</h4>
			<h3 class=title>What has happened to Haringey in the last few years</h3>
		</div>
		<div class=container>
			<div class="row align-items-center">
				<div class=col-lg-6>
					<div class="growth_content mt-45">
						<div class="section_title ">
							<h4 class=sub_title>Let us show you something different in Haringey</h4>
						</div>
						<p>Haringey is located in North London, a Borough with three main districts and 45 LSOAs(Lower Layer Super Output Area), with a
							total population of over 200,000. The area contains a rich and diverse London culture and is
							a beautiful area. The crime rate in Haringey has steadily decreased over the last three years</p>
						<h5 class=growth_title>causations on it</h5>
						<p>The decline in crime in Haringey is due to a number of policies by the Haringey Local Authority.
							Over the past three years, Haringey Council has introduced a number of policing measures to
							tackle a wide range of crime types including robbery and burglary, which have helped to bring
							the crime situation in Haringey under control.</p>
					</div>
				</div>
				<div class=col-lg-6>
					<div class="mt-50" style="margin-bottom:20px;margin-left:120px">
						<ul style="height:230px;width:750px;padding: 0;position: relative;" id="banner"></ul>
						<script>
							  var cur_ul = document.getElementById("banner");
							  var arr = new Array();
							  for (i = 1; i <= 3; i++) {
								var cur_li = document.createElement("li");
								var cur_img = document.createElement("img");
								cur_img.src = "images/" + i + ".jpg";
								cur_img.style.width = "350px";
								cur_img.style.height = "255px";
								cur_li.appendChild(cur_img);
								cur_ul.appendChild(cur_li);
								cur_ul.onmouseenter = function () {
								  clearInterval(timer);
								};
								cur_ul.onmouseleave = function () {
								  timer = setInterval(get_next, 3000);
								};
								arr.push(cur_li);
							  }
							  var len = arr.length - 1;
							  arr[len - 2].style.left = "0px";
							  arr[len - 1].style.left = "200px";
							  arr[len].style.left = "400px";
							  arr[len - 1].style.transform = "scale(1.3)";
							  arr[len - 1].style.zIndex = 100;
							  function get_next() {
								var give_up = arr[arr.length - 1];
								arr.pop();
								arr.unshift(give_up);
								for (var i = 0; i < arr.length; i++) {
								  arr[i].style.zIndex = i;
								  arr[i].style.transform = "scale(1)";
								}
								arr[len - 2].style.left = "0px";
								arr[len - 1].style.left = "200px";
								arr[len].style.left = "400px";
								arr[len - 1].style.transform = "scale(1.3)";
								arr[len - 1].style.zIndex = 100;
							  }
							  var timer = setInterval(get_next, 3000);
							  var pre_img = document.createElement("img");
							  pre_img.src = "images/pre-icon.png";
							  pre_img.style.position = "absolute";
							  pre_img.style.width = "20px";
							  pre_img.style.top = 0;
							  pre_img.style.bottom = 0;
							  pre_img.style.left = 0;
							  pre_img.style.margin = "auto";
							  pre_img.style.zIndex = 100;
							  cur_ul.appendChild(pre_img);
							  var next_img = document.createElement("img");
							  next_img.src = "images/next-icon.png";
							  next_img.style.position = "absolute";
							  next_img.style.width = "20px";
							  next_img.style.top = 0;
							  next_img.style.bottom = 0;
							  next_img.style.right = 0;
							  next_img.style.margin = "auto";
							  next_img.style.zIndex = 100;
							  cur_ul.appendChild(next_img);
							  pre_img.onclick = function () {
								get_pre();
							  };
							  next_img.onclick = function () {
								get_next();
							  };
							  function get_pre() {
								var give_up = arr[0];
								arr.shift();
								arr.push(give_up);
								for (var i = 0; i < arr.length; i++) {
								  arr[i].style.zIndex = i;
								  arr[i].style.transform = "scale(1)";
								}
								arr[len - 2].style.left = "0px";
								arr[len - 1].style.left = "200px";
								arr[len].style.left = "400px";
								arr[len - 1].style.transform = "scale(1.3)";
								arr[len - 1].style.zIndex = 100;
							  }
							</script>
					</div>
				</div>
			</div>
		</div>
		<div class=growth_shape>
			<img class=shape src="images/shape-2.svg" alt="shape">
		</div>
	</section>
</div>

<!--Select column-->
<div id="hcmap" class="main">
	<div class="xx">
	<div class="topmenu">
		<div class="topmenuitem">
			<div style="border:0px;"></div>
			<div>
				<img id="fresh"  src="images/fresh.png"/>
			</div>
		</div>

		<div class="topmenuitem">
			<div>Basic information</div>
			<div>
				<span style="margin-left:10px" id="toparea">Area</span>
				<span  id="toppop">Population</span>
				<span id="topden">Pop-density</span>
			</div>
		</div>

		<div class="topmenuitem">
			<div>Society</div>
			<div>
				<span style="margin-left:10px" id="topedu">Education</span>
				<span id="topheal">Health</span>
				<span id="topreg">Religion</span>
				<span id="topage">Average-age</span>
				<span id="toplang">Language</span>
			</div>
		</div>

		<div class="topmenuitem">
			<div>Wellbeing&Life</div>
			<div>
				<span style="margin-left:10px" id="tophouse">Housing</span>
				<span id="topTrans">Work-distance</span>
				<span id="topgreen">Green-avail</span>
				<span id="topcrime">Crime</span>
			</div>
		</div>

		<div class="topmenuitem">
			<div>Employment</div>
			<div>
				<span style="margin-left:10px;" id="topinc">Income-deprivation</span>
				<span id="topempo">Employment</span>
			</div>
		</div>
	</div>
	</div>

	<!--main map area, pie line and map-->
	<div class="content">
		<div>
			<div id="pie"></div>
			<div id="line"></div>
		</div>
		<div id="mapContent" style="width: 80%; margin: 40px auto; display: flex; justify-content: center;"></div>
		<div class="right_new">
			<div class="rightbar">
				<div style="color:#8246AF">Shade By</div>
				<div>
					<select id="shadeSelect" onchange="shadeChange()">
						<option id="category">category</option>
						<option id="emission">emission</option>
						<option >Average IMD index</option>
						<option id="pop-change">Population change</option>

					</select>
				</div>
				<div id="shadeList"></div>
				<h6 id="shade-explain" style="color:#808080; padding-top:10px"></h6>
			</div>
				<div class="rightbar_intro">
					<div style="color:#8246AF">intro</div>
					<h4 id="introduction" style="color:#808080;">The map shows the information in Haringey 21 wards, please click top information to get the information</h4>
					<h5 id="intro-explain" style="color:#808080; padding-top:20px"></h5>
				</div>
		</div>
	</div>
</div>

<!--echarts‘s js-->
<script>
//echart.js pie chart use, in order to reduce time this time manually entered the data values, but in fact can be
//imported into the excel table to assign values, to achieve changes
		// pie graph
		var PiechartContainer = document.getElementById('pie');
		var myPieChart = echarts.init(PiechartContainer);
		var data = [
		  {value: 12.353, name: 'West'},
		  {value: 10.0638, name: 'Center'},
		  {value: 7.1815, name: 'East'},
		];
		myPieChart.setOption({
		 title: {
                text: '		     	  Haringey area(km2) by region',
                  top: '91%',
            },
		     tooltip: {
                show: true,
                trigger: "item",
                backgroundColor: "#FFFFFF",
                formatter: "Proportion：{b}<br/>{c}({d}%)"
            },
		  series: [{
			type: 'pie',
			data: data,
 label: {
              show: true,
              position: 'inner',
              color:'#fff',
              fontSize: '15',
              formatter: '{d}%',
              fontWeight:'bold',
            },
		  }]
		});
		// fresh
		document.getElementById('fresh').addEventListener('click', function() {
		var newData = [		  {value: 12.353, name: 'West'},
		  {value: 10.0638, name: 'Center'},
		  {value: 7.1815, name: 'East'},];
		  myPieChart.setOption({title: {text:'		     	     Area of Haringey by regions'},series: [{data: newData}]});
		});
		// toparea
		document.getElementById('toparea').addEventListener('click', function() {
		var newData = [		  {value: 12.353, name: 'West'},
		  {value: 10.0638, name: 'Center'},
		  {value: 7.1815, name: 'East'},];
		  myPieChart.setOption({title: {text:'		            Area of Haringey by regions'},series: [{data: newData}]});
		});
		// toppop
		document.getElementById('toppop').addEventListener('click', function() {
		var newData = [{value: 8111.444444, name: 'West'},
		  {value: 11247.7777777778, name: 'Center'},
		  {value: 9018.55555555555, name: 'East'},];
		  myPieChart.setOption({title: {text:'		     	Population of Haringey by regions'},series: [{data: newData}]});
		});
		// popden
		document.getElementById('topden').addEventListener('click', function() {
		var newData = [{value: 5722.88888888889, name: 'West'},{value: 9255, name: 'Center'},{value: 8041.22222222222, name: 'East'},];
		  myPieChart.setOption({title: {text:'		        	Population density by regions'},series: [{data: newData}]});
		});
		// topheal
		document.getElementById('topedu').addEventListener('click', function() {
		var newData = [
		{value: 39917, name: 'No qualifications'},
		{value: 13756, name: 'Level 1 and entry level qualifications'},
		{value: 17328, name: 'Level 2 qualifications'},
		{value: 6274, name: 'Apprenticeship'},
		{value: 23818, name: 'Level 3 qualifications'},
		{value: 99019, name: 'Level 4 qualifications or above'},
		{value: 39917, name: 'other qualifications '},
		];
		  myPieChart.setOption({title: {text:'		           	 Education info of Haringey'},series: [{data: newData}]});
		});
		// topheal
		document.getElementById('topheal').addEventListener('click', function() {
		var newData = [
		{value: 134941, name: 'Very good health'},
		{value: 81156, name: 'Good health'},
		{value: 26714, name: 'Fair health'},
		{value: 9565, name: 'Bad health'},
		{value: 3087, name: 'Very bad health'},
		];
		  myPieChart.setOption({title: {text:'		     	   Population Health by regions'},series: [{data: newData}]});
		});
		// topreg
		document.getElementById('topreg').addEventListener('click', function() {
		var newData = [
		{value: 103943, name: 'Christian'},
		{value: 2456, name: 'Buddhist'},
		{value: 3527, name: 'Hindu'},
		{value: 9396, name: 'Jewish'},
		{value: 33297, name: 'Muslim'},
		{value: 893, name: 'Sikh'},
		{value: 83542, name: 'No religion'},
		{value: 6158, name: 'Other religion'},
		{value: 21022, name: 'Religion not stated'},
		];
		  myPieChart.setOption({title: {text:'		     	Religions consititute in Haringey'},series: [{data: newData}]});
		});
		// topage
		document.getElementById('topage').addEventListener('click', function() {
		var newData = [
		{value: 29673, name: 'Aged 5 to 15'},
		{value: 11579, name: 'Aged 16 to 19 years'},
		{value: 16366, name: 'Aged 20 to 24 years'},
		{value: 49896, name: 'Aged 25 to 34 years'},
		{value: 63918, name: 'Aged 35 to 49 years'},
		{value: 46520, name: 'Aged 50 to 64 years'},
		{value: 15972, name: 'Aged 65 to 74 years'},
		{value: 11734, name: 'Aged 75 and over'},
		];
		  myPieChart.setOption({title: {text:'		          Age in Haringey by categorys'},series: [{data: newData}]});
		});
		// toplang
		document.getElementById('toplang').addEventListener('click', function() {
			var newData = [{value: 0.834, name: 'english speaker(English in England, or English or Welsh in Wales as a main language)'},{value: 0.166, name: 'no-english'},];
		  myPieChart.setOption({title: {text:'		   	English user in Household in Haringey'},series: [{data: newData}]});
		});
		// tophouse
		document.getElementById('tophouse').addEventListener('click', function() {
		var newData = [{value: 40487, name: 'Owned'},{value: 1737, name: 'shared ownership'},{value: 26476, name: 'Social rent'},{value: 36956, name: 'Private'}];
		  myPieChart.setOption({title: {text:'House ownership in Haringey by type'},series: [{data: newData}]});
		});
		// topgreen
		document.getElementById('topgreen').addEventListener('click', function() {
		var newData = [{value: 0.29, name: 'West'},{value: 0.33, name: 'Center'},{value: 0.44, name: 'East'},];
		  myPieChart.setOption({title: {text:'		        	Green space area by regions'},series: [{data: newData}]});
		});
		// topcrime
		document.getElementById('topcrime').addEventListener('click', function() {
		var newData = [{value:1274, name: 'West'},{value: 2449, name: 'Center'},{value: 2974, name: 'East'},];
		  myPieChart.setOption({title: {text:'		     	Crime density by km2 in Haringey'},series: [{data: newData}]});
		});
		// toptrans
		document.getElementById('topTrans').addEventListener('click', function() {
		var newData = [{value: 20374, name: 'Lees than 5 km to go to work'},{value: 32566, name: '5 to 20 km to go to work'},{value: 2547, name: '20 to 60 km to go to wrok'},{value: 922, name: 'Needs more than 60 km to go to work'},{value: 76803, name: 'work at home or no fixed place'}];
		  myPieChart.setOption({title: {text:'		     	      Transport index by regions'},series: [{data: newData}]});
		});
		// topinc
		document.getElementById('topinc').addEventListener('click', function() {
		var newData = [{value: 0.072, name: 'West'},{value: 0.146, name: 'Center'},{value: 0.153, name: 'East'},];
		  myPieChart.setOption({title: {text:'		          Avg-income index by regions'},series: [{data: newData}]});
		});
		// topemployment
		document.getElementById('topempo').addEventListener('click', function() {
		var newData = [{value: 0.454, name: 'West'},{value: 0.502, name: 'Center'},{value: 0.342, name: 'East'},];
		  myPieChart.setOption({title: {text:'		       Avg-employment index by regions'},series: [{data: newData}]});
		});
	  </script>

<script>
//echart.js line graph use, to reduce time this time manually entered the data values, but in fact you can import the
//excel sheet to assign values, to achieve changes
		// line graph
		var LinechartContainer = document.getElementById('line');
		var myLineChart = echarts.init(LinechartContainer);
		var data = [1232,2230,4312];
		myLineChart.setOption({
		 grid: {
    			 left: '2%',
    			 right: '2%',
    			 bottom: '10%',
    			 containLabel: true,
    			 show:'true',
    			 borderWidth:'0'
    		},
		title: {
                text: '        Population Changes in past 3 years',
                top:'91%',
            },
		 tooltip: {
                show: true,
                trigger: "axis",
                backgroundColor: "#FFFFFF",
            },
		  xAxis: {
			type: 'category',
			data: ['2020', '2021', '2022']
		  },
		  yAxis: {
			type: 'value'
		  },
		  series: [
		  {
			type: 'line',
			data: data,
	itemStyle: {
				normal: {
					color: '#4B0082', //改变折线点的颜色
					lineStyle: {
						color: '#8246AF' //改变折线颜色
					}
				}
			},
		  	}
		  ]
		});
		// fresh
		document.getElementById('fresh').addEventListener('click', function() {
		  var newData = [268647,266357,264130,255400];
		  myLineChart.setOption({title: {text: '        Population Changes in past 4 years'},xAxis: {type: 'category',
			data: ['2019','2020', '2021', '2022']},yAxis:{min:250000,max:270000},
			series: [{data: newData}]});});
		// toparea
		document.getElementById('toparea').addEventListener('click', function() {
		  var newData = [268647,266357,264130,255400];
		  myLineChart.setOption({title: {text: '        Population Changes in past 4 years'},xAxis: {type: 'category',
			data: ['2019','2020', '2021', '2022']},yAxis:{min:250000,max:270000},
			series: [{data: newData}]});});
		// toppop
		document.getElementById('toppop').addEventListener('click', function() {
		  var newData = [268647,266357,264130,255400];
		  myLineChart.setOption({title: {text: '        Population Changes in past 4 years'},xAxis: {type: 'category',
			data: ['2019','2020', '2021', '2022']},yAxis:{min:250000,max:270000},
			series: [{data: newData}]});});
		// topden
		document.getElementById('topden').addEventListener('click', function() {
		  var newData = [8954,8878,8804,8513];
		  myLineChart.setOption({title: {text: '        Pop-density Changes in past 4 years'},xAxis: {type: 'category',
			data: ['2019','2020', '2021', '2022']},yAxis:{min:8000,max:9000},
			series: [{data: newData}]});});
		// topage
		document.getElementById('topage').addEventListener('click', function() {
		  var newData = [35.4,35.8,36.4,36.3];
		  myLineChart.setOption({title: {text: '        Avg-age Changes in past 4 years'},xAxis: {type: 'category',
			data: ['2019','2020', '2021', '2022']},yAxis:{min:35,max:38},
			series: [{data: newData}]});});
		// tophouse
		document.getElementById('tophouse').addEventListener('click', function() {
		 var newData = [685,657,651,694,762];
		  myLineChart.setOption({title: {text: '        House price Changes in past 4 years'},xAxis: {type: 'category',
			data: ['2018','2019','2020', '2021', '2022']},yAxis:{min:600,max:800},
			series: [{data: newData}]});});
		// topcrime
		document.getElementById('topcrime').addEventListener('click', function() {
		 var newData = [115,115,105,106,105];
		  myLineChart.setOption({title: {text: '        Crime per 1000 people in past 4 years'},xAxis: {type: 'category',
			data: ['2018','2019','2020', '2021', '2022']},yAxis:{min:100,max:120},
			series: [{data: newData}]});});
		// topinc
		document.getElementById('topinc').addEventListener('click', function() {
		 var newData = [34178,35363,37143,34639,35764];
		  myLineChart.setOption({title: {text: '        Avg-people-income(￡) in past 4 years'},xAxis: {type: 'category',
			data: ['2018','2019','2020', '2021', '2022']},yAxis:{min:37500,max:34000},
			series: [{data: newData}]});});
		// topemployment
		document.getElementById('topempo').addEventListener('click', function() {
		var newData = [58.9,60.1];
		  myLineChart.setOption({title: {text: '        Avg-employment rate in past 10 years'},xAxis: {type: 'category',
			data: ['2011','2021']},yAxis:{min:58,max:61},
			series: [{data: newData}]});});
	  </script>

<div id="footer" class="footer_area">
	<div class="containerfoot" style="margin-top:0px">
		<div class="footer_about mt-50">
			<ul class="social">
				<li><img src="images/hcc3.png" alt="Logo"></li>
				<li><a href="https://www.facebook.com/haringeycouncil/?locale=en_GB"><i class="lni lni-facebook-filled"></i></a></li>
				<li><a href="https://twitter.com/haringeycouncil"><i class="lni lni-twitter-original"></i></a></li>
				<li><a href="https://www.instagram.com/haringeycouncil/"><i class="lni lni-instagram-original"></i></a></li>
				<li><a href="https://www.linkedin.com/company/haringey/"><i class="lni lni-linkedin-original"></i></a></li>
			</ul>
		</div>
	</div>
</div>
</body>

</html>
